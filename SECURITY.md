# SECURITY · 安全模型与滥用报告

本文件描述 “Wuwei Psyche Causal Lab” 在设计层面的安全考虑，  
以及使用者在部署和扩展时应注意的事项。

---

## 1. 默认安全假设（Default Safety Assumptions）

- 本项目 **默认本地运行**，不强制连接任何云端服务；
- 本项目 **不内置** 长期用户画像存储或跨会话追踪机制；
- 本项目默认只提供**低风险、自助型建议**，不提供医疗或强干预方案；
- 本项目中的示例策略和参数均为**研究示意用**，并非经过临床验证。

---

## 2. 安全护栏设计（Safety Guards）

核心安全组件位于 `engine/safety` 目录，包括但不限于：

1. `filters.py`  
   - 检测自伤、他伤、医疗诊断等高危关键词；  
   - 返回命中特征，用于上层决策。

2. `risk_limits.py`  
   - 定义风险阈值（例如 `max_strategy_risk`、`max_cf_risk`）；  
   - 超出阈值时，不执行特定类型操作。

3. `policies.py`  
   - 根据文本内容与风险评分决定：  
     - 正常返回低风险建议（normal mode）；  
     - 仅返回安全提示，不给出任何干预建议（safe_message_only）。

> 建议使用者在生产近似环境中，**审查并适当收紧**这些规则与阈值。

---

## 3. 配置与部署注意事项

### 3.1 配置文件

- `configs/safety.yaml`（或等价配置）用于设置：
  - 风险阈值；
  - 高危关键词/模式；
  - 触发熔断后的行为。

- `configs/learning.yaml`  
  - 开源版本建议默认：`online_learning.enabled = false`；  
  - 如需启用任何形式的在线学习或写回，请：  
    - 明确数据来源与用途；  
    - 严格遵守隐私与合规要求。

### 3.2 日志与监控

- 避免在日志中记录完整的敏感文本或个人身份信息；
- 若需记录日志以改进模型，应：
  - 使用匿名化/脱敏处理；
  - 限定访问权限与存储时长；
  - 明确告知使用者/参与者。

---

## 4. 数据与访问控制

- 建议在生产环境使用本项目时：
  - 置于受控的内网环境；
  - 使用认证/鉴权机制限制 API 访问；
  - 结合防火墙、网关等安全设施。

- 若部署在云环境：
  - 避免公开暴露管理接口；
  - 使用 HTTPS；
  - 配置合理的请求速率限制（rate limiting）。

---

## 5. 依赖与供应链安全

- 请定期检查并更新第三方依赖（如 FastAPI、Uvicorn 等）的安全公告；
- 避免直接从不可信源加载并执行代码（包括“在线插件”）；
- 若你打算集成更多模型或服务，请审查其安全和隐私政策。

---

## 6. 漏洞与滥用报告（Reporting Security Issues）

如果你：

- 发现本项目存在安全缺陷；
- 观察到本项目被用于高危、恶意或令人担忧的场景；

请通过以下方式（示例）联系维护者：

- 提交 GitHub Security Advisory（如仓库开启）；
- 发送电子邮件至项目维护者（在仓库主页或 AUTHORS 中提供）；
- 或在不泄露敏感细节的前提下，开 Issue 表达你的担忧。

在报告问题之前，请尽量：

- 提供可重现步骤（如适用）；
- 避免公开披露尚未修复的严重漏洞细节；
- 给予维护者合理的响应时间。

---

## 7. 使用者责任

本项目的安全设计侧重于“默认安全”和“安全提示”，  
但最终的部署方式、扩展代码和具体用法由使用者控制。

因此，使用者应对以下内容负责：

- 部署环境的安全性；
- 数据采集、存储和处理的合规性；
- 对最终用户的告知与保护程度；
- 对于任何高危扩展或禁用安全护栏行为的后果。

---